<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FAQ &mdash; Documentation GeoNature 2.0</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=e8570148"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/translations.js?v=d99ca74e"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="next" title="AUTEURS" href="authors.html" />
    <link rel="prev" title="DEVELOPPEMENT" href="development.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >

          
          
          <a href="index.html" class="icon icon-home">
            GeoNature
              <img src="_static/LogoGeonature.jpg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" aria-label="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">INSTALLATION</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-manual.html">MANUEL UTILISATEUR</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin-manual.html">MANUEL ADMINISTRATEUR</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">DEVELOPPEMENT</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html#tests-backend">Tests backend</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#problemes-lies-au-frontend">Problèmes liés au frontend</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#changement-d-url-de-geonature">Changement d’URL de GeoNature</a></li>
<li class="toctree-l3"><a class="reference internal" href="#message-d-erreur-lors-de-la-compilation-du-frontend">Message d’erreur lors de la compilation du frontend</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#problemes-lies-a-la-bdd">Problèmes liés à la BDD</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">AUTEURS</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">CHANGELOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-references.html">API REFERENCES</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GeoNature</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">FAQ</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/FAQ.rst.txt" rel="nofollow"> Afficher la source de la page</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="faq">
<h1>FAQ<a class="headerlink" href="#faq" title="Link to this heading"></a></h1>
<section id="problemes-lies-au-frontend">
<h2>Problèmes liés au frontend<a class="headerlink" href="#problemes-lies-au-frontend" title="Link to this heading"></a></h2>
<section id="changement-d-url-de-geonature">
<h3>Changement d’URL de GeoNature<a class="headerlink" href="#changement-d-url-de-geonature" title="Link to this heading"></a></h3>
<p>Si vous souhaitez changer l’URL de l’API de GeoNature, il est nécessaire d’indiquer les nouvelles adresses dans le fichier de configuration principale (<code class="docutils literal notranslate"><span class="pre">geonature/config/geonature_config.toml</span></code> pour GeoNature, ainsi que ceux de TaxHub et UsersHub)  ainsi que le fichier <code class="docutils literal notranslate"><span class="pre">frontend/src/assets/config.json</span></code> précisant l’URL de l’API au frontend. Pour mettre à jour ce fichier automatiquement, relancer le script <code class="docutils literal notranslate"><span class="pre">install/05_install_frontend.sh</span></code>.</p>
</section>
<section id="message-d-erreur-lors-de-la-compilation-du-frontend">
<h3>Message d’erreur lors de la compilation du frontend<a class="headerlink" href="#message-d-erreur-lors-de-la-compilation-du-frontend" title="Link to this heading"></a></h3>
<ul>
<li><p><strong>Problème lié à Node-sass</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">at</span> <span class="n">module</span><span class="o">.</span><span class="n">exports</span> <span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span><span class="o">/</span><span class="n">geonature2</span><span class="o">/</span><span class="n">frontend</span><span class="o">/</span><span class="n">node_modules</span><span class="o">/</span><span class="n">node</span><span class="o">-</span><span class="n">sass</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">binding</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">13</span><span class="p">)</span> <span class="n">at</span> <span class="n">Object</span><span class="o">.&lt;</span><span class="n">anonymous</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span><span class="o">/</span><span class="n">geonature2</span><span class="o">/</span><span class="n">frontend</span><span class="o">/</span><span class="n">node_modules</span><span class="o">/</span><span class="n">node</span><span class="o">-</span><span class="n">sass</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">14</span><span class="p">:</span><span class="mi">35</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>Lancer la commande : <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">rebuild</span> <span class="pre">node-sass</span> <span class="pre">--force</span></code></p>
<ul class="simple">
<li><p><strong>Problème de mémoire</strong></p></li>
</ul>
<p>Si vous avez un message d’erreur durant le build du frontend ressemblant à l’un des messages ci-dessous :</p>
<div class="highlight-dmesg notranslate"><div class="highlight"><pre><span></span><span class="gr">[26098:0x3d10640]    98298 ms: Scavenge 977.3 (1059.9) -&gt; 962.2 (1059.9) MB, 18.5 / 0.0 ms  allocation failure</span>
&lt;--- JS stacktrace ---&gt;
Cannot get stack trace in GC.
<span class="gr">FATAL ERROR: MarkingDeque::EnsureCommitted Allocation failed - process out of memory</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>npm<span class="w"> </span>run<span class="w"> </span>build

<span class="go">&gt; geonature@0.0.0 build</span>
<span class="go">&gt; ng build --aot=false --build-optimizer=false --configuration production</span>

<span class="go">Warning: Support was requested for IE 11 in the project&#39;s browserslist configuration. IE 11 support is deprecated since Angular v12.</span>
<span class="go">For more information, see https://angular.io/guide/browser-support</span>
<span class="go">✔ Browser application bundle generation complete.</span>
<span class="go">Killed</span>
</pre></div>
</div>
<p>Cela vient d’un manque de mémoire vive lors du build du frontend.</p>
<p>Vous pouvez essayer de stopper les backends durant le build du frontend :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>stop<span class="w"> </span>geonature
<span class="gp">$ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>stop<span class="w"> </span>geonature-worker
<span class="gp">$ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>stop<span class="w"> </span>taxhub
<span class="gp">$ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>stop<span class="w"> </span>usershub
<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>frontend
<span class="gp">$ </span>nvm<span class="w"> </span>use
<span class="gp">$ </span>npm<span class="w"> </span>run<span class="w"> </span>build
<span class="gp">$ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>geonature
<span class="gp">$ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>geonature-worker
<span class="gp">$ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>taxhub
<span class="gp">$ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>usershub
</pre></div>
</div>
<p>Si cela n’est pas suffisant, vous pouvez également essayer de rajouter du swap à votre machine.
Les commandes ci-dessous permettent de créer un fichier de swap de 4G (<a class="reference external" href="https://stackoverflow.com/questions/26193654/node-js-catch-enomem-error-thrown-after-spawn">https://stackoverflow.com/questions/26193654/node-js-catch-enomem-error-thrown-after-spawn</a>):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>fallocate<span class="w"> </span>-l<span class="w"> </span>4G<span class="w"> </span>/swapfile<span class="w">  </span><span class="c1"># Create a 4 gigabyte swapfile</span>
<span class="gp">$ </span>sudo<span class="w"> </span>chmod<span class="w"> </span><span class="m">600</span><span class="w"> </span>/swapfile<span class="w">  </span><span class="c1"># Secure the swapfile by restricting access to root</span>
<span class="gp">$ </span>sudo<span class="w"> </span>mkswap<span class="w"> </span>/swapfile<span class="w">  </span><span class="c1"># Mark the file as a swap space</span>
<span class="gp">$ </span>sudo<span class="w"> </span>swapon<span class="w"> </span>/swapfile<span class="w">  </span><span class="c1"># Enable the swap</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>Au redémarrage de la machine, il faudra réactiver le swap en exécutant à nouveau la dernière commande, à moins de rajouter une entrée dans votre fichier <code class="docutils literal notranslate"><span class="pre">/etc/fstab</span></code>.</p>
</div>
<ul class="simple">
<li><p><strong>Problème d’affichage du Frontend</strong></p></li>
</ul>
<p>Si vous rencontrez des problèmes de librairies Frontend qui n’ont pas bien été installées ou non accessibles, vous pouvez les réinstaller</p>
<ul class="simple">
<li><p>Réinstaller les dépendances du Frontend : Dans le répertoire frontend, lancez la commande <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">ci</span></code></p></li>
<li><p>Reconstruire le Frontend : Dans le répertoire frontend, lancez la commande <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">build</span></code></p></li>
</ul>
</section>
</section>
<section id="problemes-lies-a-la-bdd">
<h2>Problèmes liés à la BDD<a class="headerlink" href="#problemes-lies-a-la-bdd" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Après un redémarrage de PostgreSQL (<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">service</span> <span class="pre">postgresql</span> <span class="pre">restart</span></code>), celle-ci ne sera plus accessible par l’application et si vous tentez de vous connecter, vous aurez un message du type <code class="docutils literal notranslate"><span class="pre">LoginError</span></code>. Cela est lié au fait que lorsqu’on redémarre PostgreSQL, il faut aussi relancer les API de GeoNature, car cela génère des erreurs de transaction et de session entre l’API et PostgreSQL.</p></li>
</ul>
<p>Donc à chaque <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">restart</span> <span class="pre">postgresql</span></code>, lancer un <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">restart</span> <span class="pre">geonature</span></code></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pied de page">
        <a href="development.html" class="btn btn-neutral float-left" title="DEVELOPPEMENT" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Précédent</a>
        <a href="authors.html" class="btn btn-neutral float-right" title="AUTEURS" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Droits d'auteur 2018-2023, PnE, PnC.</p>
  </div>

  Compilé avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thème</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>