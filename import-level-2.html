
<!DOCTYPE html>


<html lang="fr" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>IMPORT NIVEAU 2 &#8212; Documentation GeoNature 2.0</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=fd3f3429" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="_static/documentation_options.js?v=94f178cf"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="_static/translations.js?v=041d0952"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'import-level-2';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="fr"/>
  <meta name="docsearch:version" content="2.0" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/LogoGeonature.jpg" class="logo__image only-light" alt="Documentation GeoNature 2.0 - Home"/>
    <img src="_static/LogoGeonature.jpg" class="logo__image only-dark pst-js-only" alt="Documentation GeoNature 2.0 - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/PnX-SI/GeoNature" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Recherche" aria-label="Recherche" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Recherche</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-manual.html">Manuel utilisateur</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin-manual.html">Manuel administrateur</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Développement</a></li>

<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Auteurs</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">CHANGELOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-references.html">API REFERENCES</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/PnX-SI/GeoNature" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Dépôt source"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/PnX-SI/GeoNature/blob/master/docs/import-level-2.rst?plain=1" target="_blank"
   class="btn btn-sm btn-source-file-button dropdown-item"
   title="Show source"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="btn__text-container">Show source</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Téléchargez cette page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/import-level-2.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Télécharger le fichier source"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Imprimer au format PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Mode plein écran"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Recherche" aria-label="Recherche" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>IMPORT NIVEAU 2</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contenu </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#description">Description</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#import-du-fichier-csv">1 - Import du fichier CSV</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#preparation-de-la-nouvelle-table-contenant-les-donnees-importees">2 - Préparation de la nouvelle table contenant les données importées</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creation-des-metadonnees">3 - Création des métadonnées</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creation-du-mapping-source-cible">4 - Création du mapping (source –&gt; cible)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#construire-la-requete-d-import">5 - Construire la requête d’import</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chargement-des-donnees-dans-la-table-de-destination-synthese-ici">6 - Chargement des données dans la table de destination (synthese ici)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deplacement-de-la-table-importee-facultatif">7 - Déplacement de la table importée (facultatif)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#resultat-final">RESULTAT FINAL</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="import-niveau-2">
<h1>IMPORT NIVEAU 2<a class="headerlink" href="#import-niveau-2" title="Lien vers cette rubrique">#</a></h1>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Lien vers cette rubrique">#</a></h2>
<p>L’exercice consiste à importer le fichier
<a class="github reference external" href="https://github.com/PnX-SI/Ressources-techniques/blob/master/GeoNature/V2/import-avance/observations.csv">PnX-SI/Ressources-techniques</a> dans GeoNature V2.</p>
<p>1 - On charge le fichier CSV dans une table de la base de données.</p>
<p>2 - On prépare la table importée (FK et typage des champs si besoin).</p>
<p>3 - On créé les métadonnées pour que GeoNature sache identifier les nouvelles données.</p>
<p>4 - On mappe les champs de la table d’import avec ceux de la synthèse.</p>
<blockquote>
<div><p>Pour cela on utilise une fonction dédiée qui nous prépare le travail. Il ne reste plus qu’à finaliser le mapping (la fonction ne peut pas tout deviner).</p>
</div></blockquote>
<p>5 - On crée la requête d’import.</p>
<blockquote>
<div><p>Pour cela on utilise une fonction dédiée qui nous prépare le travail. On adapte la requête produite par la fonction.</p>
</div></blockquote>
<p>6 - On importe les données en synthèse.</p>
<p>7 - On gère les nouveaux taxons vis à vis la saisie.</p>
<p>8 - On archive la table où on veut.</p>
</section>
<section id="import-du-fichier-csv">
<h2>1 - Import du fichier CSV<a class="headerlink" href="#import-du-fichier-csv" title="Lien vers cette rubrique">#</a></h2>
<p>Cette action doit être faite par un superuser PostgreSQL.</p>
<dl class="field-list simple">
<dt class="field-odd">notes<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p>Le fichier CSV doit être présent localement sur le serveur hébergeant la base de données.</p></li>
<li><p>Il fichier doit être encodé en UTF-8 et la première ligne doit comporter le nom des champs.</p></li>
<li><p>Le séparateur de champs doit être le point-virgule.</p></li>
<li><p>La fonction utilise la fonction <code class="docutils literal notranslate"><span class="pre">COPY</span></code> capable de lire le système de fichier du serveur. Pour des raisons de sécurité, cette fonction <code class="docutils literal notranslate"><span class="pre">COPY</span></code> n’est accessible qu’aux superutilisateurs. Vous devez donc disposer d’un accès superutilisateur PostgreSQL pour utiliser cette fonction d’import. Si l’utilisateur connecté à la base dans pgAdmin n’est pas superuser, on peut le faire dans psql.</p></li>
</ul>
</dd>
</dl>
<p>DANS UN TERMINAL :</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>su<span class="w"> </span>postgres
psql<span class="w"> </span>-d<span class="w"> </span>geonature2db
</pre></div>
</div>
<p>Dans les 2 cas, copier-coller les 2 commandes ci-dessous en adaptant les chemins et l’utilisateur.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">load_csv_file</span><span class="p">(</span><span class="s1">&#39;/home/myuser/imports/observations.csv&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_imports.testimport&#39;</span><span class="p">);</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">testimport</span><span class="w"> </span><span class="k">OWNER</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">geonatuser</span><span class="p">;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">notes<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p>Attention : si la table existe, elle est supprimée et recréée à partir du CSV fourni.</p></li>
<li><p>La fonction créé la table et sa structure dans le schéma et la table fournie en paramètre.</p></li>
<li><p>Le contenu du fichier CSV est chargé dans la table (initialement toutes les colonnes sont de type <code class="docutils literal notranslate"><span class="pre">text</span></code>).</p></li>
<li><p>La function tente ensuite d’identifier et de modifier le type de chacune des colonnes à partir du contenu et seuls les types <code class="docutils literal notranslate"><span class="pre">integer</span></code>, <code class="docutils literal notranslate"><span class="pre">real</span></code>, et <code class="docutils literal notranslate"><span class="pre">date</span></code> sont actuellement reconnus.</p></li>
<li><p>Si vous devez modifier manuellement le type d’une colonne, vous pouvez vous inspirer du code ci-dessous.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="preparation-de-la-nouvelle-table-contenant-les-donnees-importees">
<h2>2 - Préparation de la nouvelle table contenant les données importées<a class="headerlink" href="#preparation-de-la-nouvelle-table-contenant-les-donnees-importees" title="Lien vers cette rubrique">#</a></h2>
<p><strong>Ajouter une clé primaire sur la table importée</strong></p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">testimport</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">id_data</span><span class="p">);</span>
</pre></div>
</div>
<p>Si la table ne comporte pas de champ permettant une identification unique des observations :</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">testimport</span>
<span class="w">  </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">gid</span><span class="w"> </span><span class="nb">serial</span><span class="p">;</span>

<span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">testimport</span>
<span class="w">  </span><span class="k">ADD</span><span class="w"> </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">pk_testimport</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">(</span><span class="n">gid</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Si besoin de mettre à jour le type de certains champs de la table importée</strong></p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">monschema</span><span class="p">.</span><span class="n">matable</span><span class="w"> </span><span class="k">ALTER</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">macolonne</span><span class="w"> </span><span class="k">TYPE</span><span class="w"> </span><span class="n">montype</span><span class="w"> </span><span class="k">USING</span><span class="w"> </span><span class="n">macolonne</span><span class="p">::</span><span class="n">montype</span><span class="p">;</span>
</pre></div>
</div>
<p>En l’état vos données sont importées et stockées dans la base GeoNature. Cependant GeoNature ne connait pas ces données. Pour qu’elles soient utilisables, au moins en consultation, vous devez fournir à l’application GeoNature un certain nombre d’informations concernant ces données et à minima les importer dans la synthèse. Vous pouvez également les importer dans un autre module, comme « Occtax » (non abordé dans cet exemple).</p>
</section>
<section id="creation-des-metadonnees">
<h2>3 - Création des métadonnées<a class="headerlink" href="#creation-des-metadonnees" title="Lien vers cette rubrique">#</a></h2>
<p>Il est nécessaire de rattacher les données importées à un jeu de données qui doit appartenir à un cadre d’acquisition. Si ceux-ci n’ont pas encore été créés dans la base, vous devez le faire dans <code class="docutils literal notranslate"><span class="pre">gn_meta.t_acquisition_frameworks</span></code> pour le cadre d’acquisition et dans <code class="docutils literal notranslate"><span class="pre">gn_meta.t_datasets</span></code> pour le jeu de données. Vous pouvez pour cela utiliser les formulaires disponibles dans l’interface d’aministration de GeoNature : <a class="reference external" href="http://myurl/geonature/#/admin">http://myurl/geonature/#/admin</a></p>
<p>Le jeu de données doit être rattaché à un protocole décrivant la manière dont les données ont été collectées.</p>
<dl class="field-list simple">
<dt class="field-odd">notes<span class="colon">:</span></dt>
<dd class="field-odd"><p>Noter les ID retournés lors des insertions.</p>
</dd>
</dl>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_meta</span><span class="p">.</span><span class="n">sinp_datatype_protocols</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">protocol_name</span><span class="p">,</span><span class="w"> </span><span class="n">protocol_desc</span><span class="p">,</span><span class="w"> </span><span class="n">id_nomenclature_protocol_type</span><span class="p">,</span><span class="w"> </span><span class="n">protocol_url</span><span class="p">)</span>
<span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;ATBI&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Inventaire ATBI Dans la réserve de Lauvitel - Date_debut : 2013-01-01 - Date_fin : 3000-01-01&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">395</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">)</span><span class="w"> </span><span class="n">returning</span><span class="w"> </span><span class="n">id_protocol</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_meta</span><span class="p">.</span><span class="n">t_datasets</span><span class="p">(</span><span class="n">id_acquisition_framework</span><span class="p">,</span><span class="w"> </span><span class="n">dataset_name</span><span class="p">,</span><span class="w"> </span><span class="n">dataset_shortname</span><span class="p">,</span><span class="w"> </span><span class="n">dataset_desc</span><span class="p">,</span><span class="w"> </span><span class="n">id_nomenclature_data_type</span><span class="p">,</span><span class="w"> </span><span class="n">keywords</span><span class="p">,</span><span class="w"> </span><span class="n">marine_domain</span><span class="p">,</span><span class="w"> </span><span class="n">terrestrial_domain</span><span class="p">,</span><span class="w"> </span><span class="n">active</span><span class="p">)</span>
<span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Observations Flavia 2017&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Observations Flavia 2017&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Données ATBI Flavia pour l&#39;&#39;année 2017&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">326</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Invertébrés, PNE, ATBI&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">FALSE</span><span class="p">,</span><span class="w"> </span><span class="k">TRUE</span><span class="p">,</span><span class="w"> </span><span class="k">TRUE</span><span class="p">)</span><span class="w"> </span><span class="n">returning</span><span class="w"> </span><span class="n">id_dataset</span><span class="p">;</span>
</pre></div>
</div>
<p>Il est également nécessaire, pour la synthese, de lui indiquer où sont stockées les données qu’elle contient et comment y accèder. Vous devez pour cela disposer d’une source de données dans <code class="docutils literal notranslate"><span class="pre">gn_synthese.t_sources</span></code> correspondant aux données à importer. Pour l’exemple nous allons créer une source de données avec la commande SQL suivante :</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">t_sources</span><span class="p">(</span><span class="n">name_source</span><span class="p">,</span><span class="w"> </span><span class="n">desc_source</span><span class="p">)</span>
<span class="k">VALUES</span><span class="p">(</span><span class="s1">&#39;ATBI&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Données d&#39;&#39;inventaire ATBI&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">returning</span><span class="w"> </span><span class="n">id_source</span><span class="p">;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">notes<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p>D’autres valeurs sont attendues mais pour l’exercice, le fichier source utilise des valeurs insérée à titre d’exemple lors de la création de la base GeoNature.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id_role</span></code> 3 et 4 dans <code class="docutils literal notranslate"><span class="pre">utilisateurs.t_roles</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id_organisme</span></code> 1 dans <code class="docutils literal notranslate"><span class="pre">utilisateurs.bib_organismes</span></code></p></li>
</ul>
</dd>
<dt class="field-even">notes<span class="colon">:</span></dt>
<dd class="field-even"><p>Il est possible d’utiliser ce mécanisme générique pour insérer des données de n’importe quelle table vers n’importe quelle autre, à partir du moment où il est possible d’établir un mapping cohérent entre les champs et notamment que les types puissent correspondre ou soient « transtypables ».</p>
</dd>
</dl>
</section>
<section id="creation-du-mapping-source-cible">
<h2>4 - Création du mapping (source –&gt; cible)<a class="headerlink" href="#creation-du-mapping-source-cible" title="Lien vers cette rubrique">#</a></h2>
<p>Le schéma gn_imports comporte trois tables permettant de préparer le mapping des champs entre la table importée (source) et une table de destination (target).</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">gn_imports.matching_tables</span></code> permet de déclarer la table source et la table de destination. Noter le <code class="docutils literal notranslate"><span class="pre">id_matching_table</span></code> généré par la séquence lors de l’insertion d’un nouveau « matching » dans cette table.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gn_imports.matching_fields</span></code> permet de faire le matching entre les champs de la table source et de la table de destination. Vous devez indiquer le type de chacun des champs de la table de destination ainsi que le <code class="docutils literal notranslate"><span class="pre">id_matching_table</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gn_imports.matching_geoms</span></code> permet de préparer la création du geom dans la table de destination à partir du ou des champs constituant le geom fourni dans la table source : champs contenant les x et y pour un format <code class="docutils literal notranslate"><span class="pre">xy</span></code> ou le champ comportant le wkt pour le format <code class="docutils literal notranslate"><span class="pre">wkt</span></code>.</p></li>
</ul>
<p>En attendant la création d’une interface permettant de faciliter l’import, vous devez remplir ces tables manuellement. Cependant, la fonction <code class="docutils literal notranslate"><span class="pre">gn_imports.fct_generate_mapping('table_source',</span> <span class="pre">'table_cible',</span> <span class="pre">forcedelete)</span></code> permet de pré-générer un mapping.</p>
<p>Si le mapping source/cible existe, la fonction ne fait rien et un message d’erreur est levé. Si le mapping n’existe pas ou si le paramètre <code class="docutils literal notranslate"><span class="pre">forcedelete</span> <span class="pre">(boolean</span> <span class="pre">default</span> <span class="pre">=</span> <span class="pre">false)</span></code> est à <code class="docutils literal notranslate"><span class="pre">true</span></code>, la fonction crée le mapping en remplissant la table <code class="docutils literal notranslate"><span class="pre">gn_imports.matching_tables</span></code> et la table``gn_imports.matching_fields`` avec une ligne par champ de la table cible. Il ne vous reste plus qu’à manuellement supprimer ou remplacer les valeurs “replace me” dans le champs source_field ou les valeurs par défaut proposées par la fonction.</p>
<p><strong>Pré-générer les champs à mapper</strong></p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">fct_generate_matching</span><span class="p">(</span><span class="s1">&#39;gn_imports.testimport&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.synthese&#39;</span><span class="p">);</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">fct_generate_matching</span><span class="p">(</span><span class="s1">&#39;gn_imports.testimport&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.cor_observer_synthese&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>OU si besoin d’écraser un mapping des champs existants</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">fct_generate_matching</span><span class="p">(</span><span class="s1">&#39;gn_imports.testimport&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.synthese&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">);</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">fct_generate_matching</span><span class="p">(</span><span class="s1">&#39;gn_imports.testimport&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.cor_observer_synthese&#39;</span><span class="p">,</span><span class="k">true</span><span class="p">);</span>
</pre></div>
</div>
<p>IL FAUT ICI METTRE A JOUR LA TABLE <code class="docutils literal notranslate"><span class="pre">gn_imports_matching_fields</span></code> pour établir manuellement la correspondance des champs entre la table source et la table cible (voir le mapping final pour le fichier CSV fourni en exemple à la fin de cette page).</p>
<dl class="field-list simple">
<dt class="field-odd">notes<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p>Au moins un des 2 champs <code class="docutils literal notranslate"><span class="pre">source_field</span></code> ou <code class="docutils literal notranslate"><span class="pre">source_default_value</span></code> doit être renseigné.</p></li>
<li><p>Si le champ <code class="docutils literal notranslate"><span class="pre">source_field</span></code> est renseigné, le champ <code class="docutils literal notranslate"><span class="pre">source_default_value</span></code> est ignoré.</p></li>
</ul>
</dd>
</dl>
<p>Une fois que le mapping est renseigné, vous pouvez passer à l’étape suivante.</p>
</section>
<section id="construire-la-requete-d-import">
<h2>5 - Construire la requête d’import<a class="headerlink" href="#construire-la-requete-d-import" title="Lien vers cette rubrique">#</a></h2>
<p>Attention, pgAdmin va tronquer le résultat. Pour obtenir l’ensemble de la requête utiliser le bouton d’export du résultat dans un fichier ou executé la requête avec psql.</p>
<p><strong>Génération de la requête d’import dans les tables de destination</strong></p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">fct_generate_import_query</span><span class="p">(</span><span class="s1">&#39;gn_imports.testimport&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.synthese&#39;</span><span class="p">);</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">fct_generate_import_query</span><span class="p">(</span><span class="s1">&#39;gn_imports.testimport&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.cor_observer_synthese&#39;</span><span class="p">);</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">notes<span class="colon">:</span></dt>
<dd class="field-odd"><p>UTILISER LE BOUTON D’EXPORT DU RESULTAT DE LA REQUETE DE PGADMIN ou utiliser psql.
IL EST NECESSAIRE D’ADAPTER LA REQUETE SI BESOIN DE FAIRE DES JOIN POUR RECUPERER DES VALEURS DANS D’AUTRES TABLES</p>
</dd>
</dl>
</section>
<section id="chargement-des-donnees-dans-la-table-de-destination-synthese-ici">
<h2>6 - Chargement des données dans la table de destination (synthese ici)<a class="headerlink" href="#chargement-des-donnees-dans-la-table-de-destination-synthese-ici" title="Lien vers cette rubrique">#</a></h2>
<p>Voir la requête d’import en synthèse à la fin de cette page.</p>
</section>
<section id="deplacement-de-la-table-importee-facultatif">
<h2>7 - Déplacement de la table importée (facultatif)<a class="headerlink" href="#deplacement-de-la-table-importee-facultatif" title="Lien vers cette rubrique">#</a></h2>
<p>On peut si on le souhaite déplacer la table vers une destination d’archivage</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">testimport</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">schema_destination</span><span class="p">;</span>
</pre></div>
</div>
<p>On peut la mettre dans le schéma gn_exports pour l’exercice afin de tester mais ce n’est pas sa vocation.</p>
</section>
<section id="resultat-final">
<h2>RESULTAT FINAL<a class="headerlink" href="#resultat-final" title="Lien vers cette rubrique">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">--DELETE FROM gn_imports.matching_fields WHERE id_matching_table IN (1,2);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">207</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;uuid_generate_v4()&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;unique_id_sinp&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;uuid&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">208</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;uuid_generate_v4()&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;unique_id_sinp_grp&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;uuid&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">219</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;PREUVE_EXIST&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_exist_proof&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">210</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_data&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;entity_source_pk_value&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;character varying&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">211</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_lot&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_dataset&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">209</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_source&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_source&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">213</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;TYP_GRP&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_grp_typ&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">212</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;NAT_OBJ_GEO&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_geo_object_nature&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">214</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;METH_OBS&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_obs_meth&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">215</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;TECHNIQUE_OBS&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_obs_technique&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">217</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;ETA_BIO&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_bio_condition&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">216</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;STATUT_BIO&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_bio_status&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">218</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;NATURALITE&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_naturalness&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">220</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;STATUT_VALID&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_valid_status&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">221</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;NIV_PRECIS&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_diffusion_level&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">223</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;SEXE&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_sex&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">222</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;STADE_VIE&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_life_stage&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">224</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;OBJ_DENBR&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_obj_count&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">226</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;SENSIBILITE&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_sensitivity&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">225</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;TYP_DENBR&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_type_count&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">227</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;STATUT_OBS&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_observation_status&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">228</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;DEE_FLOU&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_blurring&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">230</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;TYP_INF_GEO&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_info_geo_type&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">229</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;STATUT_SOURCE&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_source_status&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">233</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;cd_nom&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;cd_nom&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">237</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;NULL&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;digital_proof&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;text&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">238</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;NULL&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;non_digital_proof&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;text&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">239</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;altitude_retenue&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;altitude_min&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">240</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;altitude_retenue&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;altitude_max&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">244</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;dateobs&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;date_min&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;timestamp without time zone&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">245</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;dateobs&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;date_max&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;timestamp without time zone&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">246</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;NULL&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;validator&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;character varying&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">248</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;NULL&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;observers&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;character varying&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">247</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;NULL&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;validation_comment&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;text&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">250</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_synthese.get_default_nomenclature_value(&#39;&#39;METH_DETERMIN&#39;&#39;::character varying)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_nomenclature_determination_method&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">252</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;now()&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;meta_validation_date&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;timestamp without time zone&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">253</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;now()&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;meta_create_date&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;timestamp without time zone&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">254</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;now()&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;meta_update_date&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;timestamp without time zone&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;c&#39;&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;last_action&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;character&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">235</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gn_commons.get_default_parameter(&#39;&#39;taxref_version&#39;&#39;,NULL)::character varying&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;meta_v_taxref&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;character varying&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">251</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;remarques&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;comments&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;text&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">231</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;effectif_total&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;count_min&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">232</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;effectif_total&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;count_max&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">258</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;taxon_saisi&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;nom_cite&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;character varying&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">249</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;u.nom_role || &#39;&#39; &#39;&#39; || u.prenom_role&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;determiner&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;character varying&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">234</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;taxon_saisi&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;nom_cite&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;character varying&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">256</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_data&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;entity_source_pk_value&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_fields</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_default_value</span><span class="p">,</span><span class="w"> </span><span class="n">target_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_field_type</span><span class="p">,</span><span class="w"> </span><span class="n">field_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">257</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;observateurs&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id_role&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_geoms</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_geom</span><span class="p">,</span><span class="w"> </span><span class="n">source_x_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_y_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_geom_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_geom_format</span><span class="p">,</span><span class="w"> </span><span class="n">source_srid</span><span class="p">,</span><span class="w"> </span><span class="n">target_geom_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_geom_srid</span><span class="p">,</span><span class="w"> </span><span class="n">geom_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;xy&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">2154</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;the_geom_local&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">2154</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_geoms</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_geom</span><span class="p">,</span><span class="w"> </span><span class="n">source_x_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_y_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_geom_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_geom_format</span><span class="p">,</span><span class="w"> </span><span class="n">source_srid</span><span class="p">,</span><span class="w"> </span><span class="n">target_geom_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_geom_srid</span><span class="p">,</span><span class="w"> </span><span class="n">geom_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;POINT(6.064544 44.28787)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;wkt&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">4326</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;the_geom_4326&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">4326</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">matching_geoms</span><span class="w"> </span><span class="p">(</span><span class="n">id_matching_geom</span><span class="p">,</span><span class="w"> </span><span class="n">source_x_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_y_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_geom_field</span><span class="p">,</span><span class="w"> </span><span class="n">source_geom_format</span><span class="p">,</span><span class="w"> </span><span class="n">source_srid</span><span class="p">,</span><span class="w"> </span><span class="n">target_geom_field</span><span class="p">,</span><span class="w"> </span><span class="n">target_geom_srid</span><span class="p">,</span><span class="w"> </span><span class="n">geom_comments</span><span class="p">,</span><span class="w"> </span><span class="n">id_matching_table</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;xy&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">4326</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;the_geom_point&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">4326</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>

<span class="k">SELECT</span><span class="w"> </span><span class="n">pg_catalog</span><span class="p">.</span><span class="n">setval</span><span class="p">(</span><span class="s1">&#39;gn_imports.matching_fields_id_matching_field_seq&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">258</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">);</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">pg_catalog</span><span class="p">.</span><span class="n">setval</span><span class="p">(</span><span class="s1">&#39;gn_imports.matching_geoms_id_matching_geom_seq&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">);</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">pg_catalog</span><span class="p">.</span><span class="n">setval</span><span class="p">(</span><span class="s1">&#39;gn_imports.matching_tables_id_matching_table_seq&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">);</span>

<span class="c1">---------------</span>
<span class="c1">--IMPORT DATA--</span>
<span class="c1">---------------</span>
<span class="c1">--autogenerated query by</span>
<span class="c1">--SELECT gn_imports.fct_generate_import_query(&#39;gn_imports.testimport&#39;, &#39;gn_synthese.cor_observer_synthese&#39;);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">synthese</span><span class="p">(</span>
<span class="n">unique_id_sinp</span>
<span class="p">,</span><span class="n">unique_id_sinp_grp</span>
<span class="p">,</span><span class="n">id_nomenclature_exist_proof</span>
<span class="p">,</span><span class="n">entity_source_pk_value</span>
<span class="p">,</span><span class="n">id_dataset</span>
<span class="p">,</span><span class="n">id_source</span>
<span class="p">,</span><span class="n">id_nomenclature_grp_typ</span>
<span class="p">,</span><span class="n">id_nomenclature_geo_object_nature</span>
<span class="p">,</span><span class="n">id_nomenclature_obs_meth</span>
<span class="p">,</span><span class="n">id_nomenclature_obs_technique</span>
<span class="p">,</span><span class="n">id_nomenclature_bio_condition</span>
<span class="p">,</span><span class="n">id_nomenclature_bio_status</span>
<span class="p">,</span><span class="n">id_nomenclature_naturalness</span>
<span class="p">,</span><span class="n">id_nomenclature_valid_status</span>
<span class="p">,</span><span class="n">id_nomenclature_diffusion_level</span>
<span class="p">,</span><span class="n">id_nomenclature_sex</span>
<span class="p">,</span><span class="n">id_nomenclature_life_stage</span>
<span class="p">,</span><span class="n">id_nomenclature_obj_count</span>
<span class="p">,</span><span class="n">id_nomenclature_sensitivity</span>
<span class="p">,</span><span class="n">id_nomenclature_type_count</span>
<span class="p">,</span><span class="n">id_nomenclature_observation_status</span>
<span class="p">,</span><span class="n">id_nomenclature_blurring</span>
<span class="p">,</span><span class="n">id_nomenclature_info_geo_type</span>
<span class="p">,</span><span class="n">id_nomenclature_source_status</span>
<span class="p">,</span><span class="n">cd_nom</span>
<span class="p">,</span><span class="n">digital_proof</span>
<span class="p">,</span><span class="n">non_digital_proof</span>
<span class="p">,</span><span class="n">altitude_min</span>
<span class="p">,</span><span class="n">altitude_max</span>
<span class="p">,</span><span class="n">date_min</span>
<span class="p">,</span><span class="n">date_max</span>
<span class="p">,</span><span class="k">validator</span>
<span class="p">,</span><span class="n">observers</span>
<span class="p">,</span><span class="n">validation_comment</span>
<span class="p">,</span><span class="n">id_nomenclature_determination_method</span>
<span class="p">,</span><span class="n">meta_validation_date</span>
<span class="p">,</span><span class="n">meta_create_date</span>
<span class="p">,</span><span class="n">meta_update_date</span>
<span class="p">,</span><span class="n">last_action</span>
<span class="p">,</span><span class="n">meta_v_taxref</span>
<span class="p">,</span><span class="n">comments</span>
<span class="p">,</span><span class="n">count_min</span>
<span class="p">,</span><span class="n">count_max</span>
<span class="p">,</span><span class="n">nom_cite</span>
<span class="p">)</span>
<span class="k">SELECT</span>
<span class="n">uuid_generate_v4</span><span class="p">()::</span><span class="n">uuid</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">unique_id_sinp</span>
<span class="p">,</span><span class="n">uuid_generate_v4</span><span class="p">()::</span><span class="n">uuid</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">unique_id_sinp_grp</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;PREUVE_EXIST&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_exist_proof</span>
<span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">id_data</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">entity_source_pk_value</span>
<span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">id_lot</span><span class="p">::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_dataset</span>
<span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">id_source</span><span class="p">::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_source</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;TYP_GRP&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_grp_typ</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;NAT_OBJ_GEO&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_geo_object_nature</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;METH_OBS&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_obs_meth</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;TECHNIQUE_OBS&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_obs_technique</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;ETA_BIO&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_bio_condition</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;STATUT_BIO&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_bio_status</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;NATURALITE&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_naturalness</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;STATUT_VALID&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_valid_status</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;NIV_PRECIS&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_diffusion_level</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;SEXE&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_sex</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;STADE_VIE&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_life_stage</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;OBJ_DENBR&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_obj_count</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;SENSIBILITE&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_sensitivity</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;TYP_DENBR&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_type_count</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;STATUT_OBS&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_observation_status</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;DEE_FLOU&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_blurring</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;TYP_INF_GEO&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_info_geo_type</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;STATUT_SOURCE&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_source_status</span>
<span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">cd_nom</span><span class="p">::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">cd_nom</span>
<span class="p">,</span><span class="k">NULL</span><span class="p">::</span><span class="nb">text</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">digital_proof</span>
<span class="p">,</span><span class="k">NULL</span><span class="p">::</span><span class="nb">text</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">non_digital_proof</span>
<span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">altitude_retenue</span><span class="p">::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">altitude_min</span>
<span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">altitude_retenue</span><span class="p">::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">altitude_max</span>
<span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">dateobs</span><span class="p">::</span><span class="k">timestamp</span><span class="w"> </span><span class="k">without</span><span class="w"> </span><span class="k">time</span><span class="w"> </span><span class="k">zone</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">date_min</span>
<span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">dateobs</span><span class="p">::</span><span class="k">timestamp</span><span class="w"> </span><span class="k">without</span><span class="w"> </span><span class="k">time</span><span class="w"> </span><span class="k">zone</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">date_max</span>
<span class="p">,</span><span class="k">NULL</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">validator</span>
<span class="p">,</span><span class="k">NULL</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">observers</span>
<span class="p">,</span><span class="k">NULL</span><span class="p">::</span><span class="nb">text</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">validation_comment</span>
<span class="p">,</span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">get_default_nomenclature_value</span><span class="p">(</span><span class="s1">&#39;METH_DETERMIN&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">)::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_nomenclature_determination_method</span>
<span class="p">,</span><span class="n">now</span><span class="p">()::</span><span class="k">timestamp</span><span class="w"> </span><span class="k">without</span><span class="w"> </span><span class="k">time</span><span class="w"> </span><span class="k">zone</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">meta_validation_date</span>
<span class="p">,</span><span class="n">now</span><span class="p">()::</span><span class="k">timestamp</span><span class="w"> </span><span class="k">without</span><span class="w"> </span><span class="k">time</span><span class="w"> </span><span class="k">zone</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">meta_create_date</span>
<span class="p">,</span><span class="n">now</span><span class="p">()::</span><span class="k">timestamp</span><span class="w"> </span><span class="k">without</span><span class="w"> </span><span class="k">time</span><span class="w"> </span><span class="k">zone</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">meta_update_date</span>
<span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">last_action</span>
<span class="p">,</span><span class="n">gn_commons</span><span class="p">.</span><span class="n">get_default_parameter</span><span class="p">(</span><span class="s1">&#39;taxref_version&#39;</span><span class="p">,</span><span class="k">NULL</span><span class="p">)::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">::</span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">meta_v_taxref</span>
<span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">remarques</span><span class="p">::</span><span class="nb">text</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">comments</span>
<span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">effectif_total</span><span class="p">::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">count_min</span>
<span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">effectif_total</span><span class="p">::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">count_max</span>
<span class="p">,</span><span class="n">taxon_saisi</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">testimport</span><span class="w"> </span><span class="n">a</span>
<span class="p">;</span>

<span class="c1">--autogenerated query by</span>
<span class="c1">--SELECT gn_imports.fct_generate_import_query(&#39;gn_imports.testimport&#39;, &#39;gn_synthese.cor_observer_synthese&#39;);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">cor_observer_synthese</span><span class="p">(</span>
<span class="n">id_role</span>
<span class="p">,</span><span class="n">id_synthese</span>
<span class="p">)</span>
<span class="w"> </span><span class="k">SELECT</span>
<span class="n">a</span><span class="p">.</span><span class="n">observateurs</span><span class="p">::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_role</span>
<span class="p">,</span><span class="n">s</span><span class="p">.</span><span class="n">id_synthese</span><span class="p">::</span><span class="nb">integer</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id_synthese</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">gn_imports</span><span class="p">.</span><span class="n">testimport</span><span class="w"> </span><span class="n">a</span>
<span class="c1">--self addition</span>
<span class="k">JOIN</span><span class="w"> </span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">synthese</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">entity_source_pk_value</span><span class="p">::</span><span class="nb">integer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">id_data</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">id_source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="p">;</span>
</pre></div>
</div>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contenu
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#description">Description</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#import-du-fichier-csv">1 - Import du fichier CSV</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#preparation-de-la-nouvelle-table-contenant-les-donnees-importees">2 - Préparation de la nouvelle table contenant les données importées</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creation-des-metadonnees">3 - Création des métadonnées</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creation-du-mapping-source-cible">4 - Création du mapping (source –&gt; cible)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#construire-la-requete-d-import">5 - Construire la requête d’import</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chargement-des-donnees-dans-la-table-de-destination-synthese-ici">6 - Chargement des données dans la table de destination (synthese ici)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deplacement-de-la-table-importee-facultatif">7 - Déplacement de la table importée (facultatif)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#resultat-final">RESULTAT FINAL</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
Par PnE, PnC
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2018-2024, Parc National des Écrins, Parc National des Cévennes.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>